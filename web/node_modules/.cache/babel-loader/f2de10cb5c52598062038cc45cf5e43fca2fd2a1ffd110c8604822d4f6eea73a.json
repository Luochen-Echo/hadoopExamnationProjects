{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { AcGameObject } from \"./AcGameObject\";\nimport { Walls } from \"./Walls\";\nexport class GameMap extends AcGameObject {\n  constructor(ctx, parent) {\n    super();\n    this.ctx = ctx;\n    this.parent = parent;\n    this.L = 0;\n    this.rows = 13;\n    this.cols = 13;\n    this.inner_walls_count = 20;\n    this.walls = [];\n  }\n  create_walls() {\n    const g = [];\n    for (let r = 0; r < this.rows; r++) {\n      g[r] = [];\n      for (let c = 0; c < this.cols; c++) {\n        g[r][c] = false;\n      }\n    }\n\n    //给四周生成墙\n    for (let r = 0; r < this.rows; r++) {\n      g[r][0] = g[r][this.cols - 1] = true;\n    }\n    for (let c = 0; c < this.cols; c++) {\n      g[0][c] = g[this.rows - 1][c] = true;\n    }\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        if (g[r][c]) {\n          this.walls.push(new Walls(r, c, this));\n        }\n      }\n    }\n  }\n  start() {\n    this.create_walls();\n  }\n  update_size() {\n    this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\n    this.ctx.canvas.width = this.L * this.cols;\n    this.ctx.canvas.height = this.L * this.rows;\n  }\n  update() {\n    this.update_size();\n    this.render();\n  }\n  render() {\n    const color_event = \"rgb(162, 208, 72)\",\n      color_odd = \"rgb(170, 215, 81)\";\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        this.ctx.fillStyle = (r + c) % 2 ? color_odd : color_event;\n        this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L);\n      }\n    }\n  }\n}","map":{"version":3,"names":["AcGameObject","Walls","GameMap","constructor","ctx","parent","L","rows","cols","inner_walls_count","walls","create_walls","g","r","c","push","start","update_size","parseInt","Math","min","clientWidth","clientHeight","canvas","width","height","update","render","color_event","color_odd","fillStyle","fillRect"],"sources":["D:/JavaProjects/kob/web/src/assets/scripts/GameMap.js"],"sourcesContent":["import { AcGameObject } from \"./AcGameObject\";\r\nimport { Walls } from \"./Walls\";\r\n\r\nexport class GameMap extends AcGameObject {\r\n    constructor(ctx,parent) {\r\n        super();\r\n\r\n        this.ctx = ctx;\r\n        this.parent = parent;\r\n        this.L = 0;\r\n\r\n        this.rows = 13;\r\n        this.cols = 13;\r\n\r\n        this.inner_walls_count = 20;\r\n        this.walls = [];\r\n    }\r\n\r\n    create_walls() {\r\n        const g = [];\r\n        for (let r = 0; r < this.rows; r ++) {\r\n            g[r] = [];\r\n            for (let c = 0; c < this.cols; c ++) {\r\n                g[r][c] = false;\r\n            }\r\n        }\r\n\r\n        //给四周生成墙\r\n        for (let r = 0; r < this.rows; r ++) {\r\n            g[r][0] = g[r][this.cols - 1] = true;\r\n        }\r\n\r\n\r\n        for (let c = 0; c < this.cols; c ++) {\r\n            g[0][c] = g[this.rows - 1][c] = true;\r\n        }\r\n\r\n        for (let r = 0; r < this.rows; r ++) {\r\n            for (let c = 0; c < this.cols; c ++) {\r\n                if (g[r][c]) {\r\n                    this.walls.push(new Walls(r, c, this));\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    start() { \r\n        this.create_walls();\r\n    }\r\n    update_size() {\r\n        this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\r\n        this.ctx.canvas.width = this.L * this.cols;\r\n        this.ctx.canvas.height = this.L * this.rows;\r\n    }\r\n    update() { \r\n        this.update_size();\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        const color_event = \"rgb(162, 208, 72)\", color_odd = \"rgb(170, 215, 81)\"\r\n        for (let r = 0; r < this.rows; r ++) {\r\n            for (let c = 0; c < this.cols; c ++) {\r\n                this.ctx.fillStyle = (r + c) % 2 ? color_odd : color_event;\r\n                this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L);\r\n            }\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}